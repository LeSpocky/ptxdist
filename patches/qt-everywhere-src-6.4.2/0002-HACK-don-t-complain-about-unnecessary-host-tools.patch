From: Michael Olbrich <m.olbrich@pengutronix.de>
Date: Fri, 8 Jul 2022 16:59:49 +0200
Subject: [PATCH] HACK: don't complain about unnecessary host-tools

The cross build will fail if those tools are not available, but they are
not actually needed at buildtime.

This avoids building unnecessary stuff in host-qt6.

Signed-off-by: Michael Olbrich <m.olbrich@pengutronix.de>
---
 qtdeclarative/tools/CMakeLists.txt | 7 +++++--
 qtquick3d/tools/CMakeLists.txt     | 2 ++
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/qtdeclarative/tools/CMakeLists.txt b/qtdeclarative/tools/CMakeLists.txt
index 5a34fd4c1112..847c60276495 100644
--- a/qtdeclarative/tools/CMakeLists.txt
+++ b/qtdeclarative/tools/CMakeLists.txt
@@ -36,9 +36,12 @@ if(QT_FEATURE_qml_preview AND QT_FEATURE_thread AND NOT ANDROID AND NOT WASM AND
 endif()
 if(QT_BUILD_SHARED_LIBS AND QT_FEATURE_thread AND TARGET Qt::Quick AND NOT ANDROID AND NOT WASM AND NOT IOS AND NOT rtems)
     add_subdirectory(qmlscene)
-    add_subdirectory(qmltime)
+    if (NOT CMAKE_CROSSCOMPILING)
+        add_subdirectory(qmltime)
+    endif()
 endif()
 if(QT_BUILD_SHARED_LIBS
+        AND NOT CMAKE_CROSSCOMPILING
         AND QT_FEATURE_process
         AND QT_FEATURE_regularexpression
         AND QT_FEATURE_thread
@@ -66,7 +69,7 @@ if(TARGET Qt::Quick
         AND NOT rtems)
     add_subdirectory(qmleasing)
 endif()
-if(QT_FEATURE_thread AND TARGET Qt::QuickTest AND NOT ANDROID AND NOT WASM AND NOT rtems)
+if(QT_FEATURE_thread AND TARGET Qt::QuickTest AND NOT ANDROID AND NOT WASM AND NOT rtems AND NOT CMAKE_CROSSCOMPILING)
     add_subdirectory(qmltestrunner)
 endif()
 if(QT_FEATURE_private_tests AND QT_FEATURE_thread AND NOT ANDROID AND NOT WASM AND NOT IOS AND NOT rtems)
diff --git a/qtquick3d/tools/CMakeLists.txt b/qtquick3d/tools/CMakeLists.txt
index 6f7b707e466b..0c34d2a5b9dc 100644
--- a/qtquick3d/tools/CMakeLists.txt
+++ b/qtquick3d/tools/CMakeLists.txt
@@ -1,3 +1,4 @@
+if (NOT CMAKE_CROSSCOMPILING)
 add_subdirectory(balsam)
 if(TARGET Qt::Widgets)
     if(TARGET Qt::Concurrent)
@@ -15,3 +16,4 @@ endif()
 add_subdirectory(instancer)
 add_subdirectory(shapegen)
 add_subdirectory(materialeditor)
+endif()
