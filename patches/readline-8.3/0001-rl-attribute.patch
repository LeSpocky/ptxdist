From: "doko@debian.org" <doko@debian.org>
Date: Sun, 24 Jan 2010 00:31:09 +0100
Subject: [PATCH] rl-attribute.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

rl-attribute.dpatch by  <doko@debian.org>

from:
https://sources.debian.org/patches/readline/8.3-3/rl-attribute.diff/

Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>
Signed-off-by: Sven PÃ¼schel <s.pueschel@pengutronix.de>
---
 readline.h | 2 +-
 rlstdc.h   | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/readline.h b/readline.h
index 8a53b063e427..355a432671a5 100644
--- a/readline.h
+++ b/readline.h
@@ -409,7 +409,7 @@ extern void rl_activate_mark (void);
 extern void rl_deactivate_mark (void);
 extern int rl_mark_active_p (void);
 
-extern int rl_message (const char *, ...)  __attribute__((__format__ (printf, 1, 2)));
+extern int rl_message (const char *, ...)  __rl_attribute__((__format__ (printf, 1, 2)));
 
 extern int rl_show_char (int);
 
diff --git a/rlstdc.h b/rlstdc.h
index 0e5c4f47f8ee..1f357825f0db 100644
--- a/rlstdc.h
+++ b/rlstdc.h
@@ -36,10 +36,10 @@
 #  endif
 #endif
 
-#ifndef __attribute__
-#  if __GNUC__ < 2 || (__GNUC__ == 2 && __GNUC_MINOR__ < 8)
-#    define __attribute__(x)
-#  endif
+#if defined(__GNUC__) && __GNUC__ >= 2
+#  define __rl_attribute__(x) __attribute__(x)
+#else
+#  define __rl_attribute__(x)
 #endif
 
 #endif /* !_RL_STDC_H_ */
